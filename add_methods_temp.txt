    def process_instances_result(self, result):
        """JSONから読み込んだインスタンス情報を処理"""
        self.settings.load()
        selected_servers = self.settings.selected_ckan_servers.split('|')
        
        for entry in result:
            url_api = None
            if 'url-api' in entry:
                url_api = entry['url-api']
                if 'geothermaldata' not in url_api:
                    url_api = url_api.replace('http://', 'https://')
                url_api += '/api/3/' if not url_api.endswith('/api/3/') else ''
            description = entry.get('description', '')
            si = ServerInstance(entry['title'], description, entry['url'], url_api)
            si.selected = True if si.settings_key in selected_servers else False
            
            # 重複チェック（同じURLは追加しない）
            is_duplicate = False
            for existing in self.servers:
                if existing.url == si.url:
                    is_duplicate = True
                    break
            
            if not is_duplicate:
                self.servers.append(si)
    
    def add_custom_servers(self):
        """カスタムサーバーを追加"""
        self.settings.load()
        selected_servers = self.settings.selected_ckan_servers.split('|')
        
        self.util.msg_log_debug(u'{} custom servers'.format(len(self.settings.custom_servers)))
        for cs_name, cs_info in self.settings.custom_servers.items():
            # cs_info: {url, type}
            if isinstance(cs_info, dict):
                url = cs_info.get('url', '')
                # type情報は今後の拡張用。現状はCKANのみ想定
            else:
                url = cs_info  # 後方互換
            si = ServerInstance(cs_name, cs_name, url, url, custom_entry=True)
            si.selected = True if si.settings_key in selected_servers else False
            self.servers.append(si)
